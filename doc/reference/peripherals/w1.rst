.. _w1_api:

W1: Dallas 1-Wire Interface
###########################

Overview
********

1-Wire is a low speed half-duplex serial bus using only a single wire plus
ground for both data transmission and device power supply.
Similarly to I2C, 1-Wire uses a bidirectional open-collector data line,
and is a single master multidrop bus. This means one controller (master)
initiates all data exchanges with the target devices.
1-Wire supports longer bus lines than I2C, while it reaches speeds of 16 kbps in
standard speed mode and 142 kbps in overdrive mode.
The implementation details are specified in the `BOOK OF IBUTTON STANDARDS`_.

.. figure:: 1-Wire_bus_topology.drawio.svg
   :align: center
   :alt: 1-Wire bus topology

   A typical 1-Wire bus topology


.. _w1-master-api:

W1 Master API
==============

Zephyr's 1-wire master API is used to interact with 1-Wire devices like
temperature sensors and serial memories.

In Zephyr this API is split into the following layers.

* The link layer handles basic communication functions such as bus reset,
  presence detect and bit transfer operations.
  It is the only hardware-dependent layer in Zephyr.
  This layer is supported by a driver using the zephyr-serial interface, which
  should work on most zephyr platforms. In the future, a GPIO/Timer based driver
  and hardware specific drivers might be added.
* The 1-Wire network layer handles all means for device identification and bus
  arbitration.
  This includes ROM commands like match_rom, or search_rom.

   * All slave devices have a unique 64-bit identification number, which
     includes a 8-bit `1-Wire Family Code`_ and a 8-bit CRC.
   * In order to find devices on the bus, the standard specifies an search
     algorithm which successively detects all devices on the bus.
     This algorithm is described in detail by `Maxim's Applicationnote 187`_.

* Transport layer and Presentation layer functions are not implemented in the
  generic 1-Wire driver and therefore must be handled in individual device drivers.

The 1-Wire API is considered experimental.


Configuration Options
*********************

Related configuration options:

* :kconfig:option:`CONFIG_W1`
* :kconfig:option:`CONFIG_W1_NET`


API Reference
*************

1-Wire data link layer
======================

.. doxygengroup:: w1_data_link

1-Wire network layer
====================

.. doxygengroup:: w1_network

1-Wire generic functions and helpers
====================================

Functions that are not directly related to any of the networking layers.

.. doxygengroup:: w1_interface


.. _BOOK OF IBUTTON STANDARDS:
   https://www.maximintegrated.com/en/design/technical-documents/app-notes/9/937.html

.. _1-Wire Family Code:
   https://www.maximintegrated.com/en/design/technical-documents/app-notes/1/155.html

.. _Maxim's Applicationnote 187:
   https://www.maximintegrated.com/en/design/technical-documents/app-notes/1/187.html
